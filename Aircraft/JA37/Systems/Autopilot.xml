<?xml version="1.0"?>
 
 <PropertyList>
 <pid-controller>
  <name>Heading hold</name>
  <debug>false</debug>
  <enable>
   <prop>/autopilot/locks/heading</prop>
   <value>wing-leveler</value>
  </enable>
  <input>
   <prop>/orientation/roll-deg</prop>
  </input>
  <reference>0</reference>
  <output>
	<property>/fdm/jsbsim/fcs/roll-trim-cmd-norm</property>
	</output>
    <config>
      <Kp>20.00</Kp>
      <Ti>30.0</Ti>
      <Td>0.0</Td>
      <u_min>-1.0</u_min>
      <u_max>1.0</u_max>
  </config>
 </pid-controller>

 <pid-controller>
  <name>Pitch hold</name>
  <debug>false</debug>
  <enable>
   <prop>/autopilot/locks/altitude</prop>
   <value>pitch-hold</value>
  </enable>
  <input>
   <prop>/orientation/pitch-deg</prop>
  </input>
  <reference>/autopilot/settings/target-pitch-deg</reference>
  <output>
  <property>/autopilot/internal/elevator-cmd</property>
  </output>
    <config>
      <Kp>20.00</Kp>
      <Ti>30.0</Ti>
      <Td>0.0</Td>
      <u_min>-1.0</u_min>
      <u_max>1.0</u_max>
  </config>
 </pid-controller>

<pid-controller>
  <name>Auto throttle</name>
  <debug>false</debug>
  <enable>
   <prop>/autopilot/locks/speed</prop>
   <value>speed-with-throttle</value>
  </enable>
  <input>
   <prop>/instruments/airspeed-indicator/indicated-speed-kt</prop>
  </input>
  <reference>
   <prop>/autopilot/settings/target-speed-kt</prop>
  </reference>
  <output>
   <prop>/autopilot/internal/throttle-cmd</prop>
  </output>
  <config>
   <Kp>0.15</Kp>
   <Ti>20.0</Ti>
   <Td>0.00001</Td>
   <u_min>0.0</u_min>
   <u_max>1.0</u_max>
  </config>
 </pid-controller>

<filter>
  <name>AP:Pitch sample and hold</name>
  <debug>false</debug>
  <enable>
   <condition>
    <not>
     <property>/autopilot/locks/roc-lock</property>
    </not>
   </condition>
  </enable>
  <type>gain</type>
  <gain>1.0</gain>
  <input>/orientation/pitch-deg</input>
  <output>/autopilot/internal/target-pitch-deg</output>
 </filter>

 <pid-controller>
  <name>Vertical speed pitch hold</name>
  <debug>false</debug>
  <enable>
   <condition>
    <property>/autopilot/locks/roc-lock</property>
   </condition>
  </enable>
  <input>
   <prop>/autopilot/internal/vert-speed-fpm</prop>
  </input>
  <reference>/autopilot/settings/vertical-speed-fpm</reference>
  <output>
   <prop>/autopilot/settings/target-pitch-deg</prop>
  </output>
  <config>
   <Kp>0.001</Kp>
   <Ti>10.0</Ti>
   <Td>0.0</Td>
   <u_min>-10.0</u_min>
   <u_max>10.0</u_max>
  </config>
 </pid-controller>

<filter>
  <name>Target Rate of Climb Computer (ALT HOLD)</name>
  <debug>false</debug>
  <enable>
   <prop>/autopilot/locks/altitude</prop>
   <value>altitude-hold</value>
  </enable>
  <type>gain</type>
  <input>position/altitude-ft</input>
  <reference>autopilot/settings/target-altitude-ft</reference>
  <gain>-0.5</gain> <!-- 1000ft offset gives 500fpm roc -->
  <output>autopilot/internal/target-roc-fpm</output>
  <min>-1000</min>
  <max>2000</max>
 </filter>

<filter>
  <name>Heading Offset Computer</name>
  <debug>false</debug>
  <type>gain</type>
  <gain>1.0</gain>
  <input>/autopilot/settings/heading-bug-deg</input>
  <reference>/orientation/heading-magnetic-deg</reference>
  <output>/autopilot/internal/heading-offset-deg</output>
  <period>
   <min>-180</min>
   <max>180</max>
  </period>
 </filter>

<filter>
  <name>Target Roll Computer</name>
  <debug>false</debug>
  <enable>
   <prop>/autopilot/locks/heading</prop>
   <value>dg-heading-hold</value>
  </enable>
  <type>gain</type>
  <input>/autopilot/internal/heading-offset-deg</input>
  <output>/autopilot/internal/target-roll-deg</output>
  <gain>2.5</gain>
  <min>-30.0</min>
  <max>30.0</max>
 </filter>

 </PropertyList>
 
 <!-- In progress and disabled atm. Remember: http://forum.flightgear.org/viewtopic.php?f=46&t=10171-->