<?xml version="1.0"?>


<!-- **********************************************************************
        AERODYNAMICS OF JA-37

        Page references are given to pdf: http://hdl.handle.net/2060/19860019453

        Plan: Low speed Aerodynamics from NASA document above
              High speed aerodynamics from DATCOM and Australian document

        Missing: Proper high-speed aerodynamics
                 
     **********************************************************************
-->


<aerodynamics>      
  <!-- from graph page 64 -->
  <function name="aero/function/ground-effect-factor-normal">
     <description>Change in lift due to ground effect factor</description>
     <product>
        <table>
           <independentVar lookup="row">aero/h_b-mac-ft</independentVar>
           <tableData>
              0.0  1.3
              1.1  1.0
           </tableData>
        </table>
     </product>
  </function>
<!-- from graph page 64 -->
  <function name="aero/function/ground-effect-factor-Cm">
     <description>Change in pitch moment due to ground effect factor</description>
     <product>
        <table>
           <independentVar lookup="row">aero/alpha-deg</independentVar>
           <independentVar lookup="column">aero/h_b-mac-ft</independentVar>
           <tableData>
                   0.0  1.1
              0    0    0
              5   -0.04 0
             10   -0.07 0
             15   -0.1  0
           </tableData>
        </table>
     </product>
  </function>
  <!-- from DATCOM -->
  <function name="aero/function/ground-effect-factor-drag">
     <description>Change in drag due to ground effect</description>
     <product>
        <table>
           <independentVar lookup="row">aero/h_b-mac-ft</independentVar>
           <tableData>
              0.0  0.480
              0.1  0.515
              0.15 0.629
              0.2  0.709
              0.3  0.815
              0.4  0.882
              0.5  0.928
              0.6  0.962
              0.7  0.988
              0.8  1.0
              0.9  1.0
              1.0  1.0
              1.1  1.0
           </tableData>
        </table>
     </product>
  </function>
  <!-- from graph page 18, Australian document -->
  <function name="aero/function/mach-effect-factor-drag">
     <description>Change in drag due to mach effect</description>
     <product>
        <table>
           <independentVar>velocities/mach</independentVar>
            <tableData>
                0.0000  1
                0.8200  1
                0.8800  1.11
                0.9500  1.66
                1.0000  2.28
                1.1000  2.5
                1.3500  2.33
                2.2000  2.33
            </tableData>
        </table>
     </product>
  </function>

  <function name="aero/coefficient/CDgear">
      <description>Drag_due_to_gear</description>
      <product>
          <!--<property>aero/function/mach-effect-factor-drag</property>-->
          <property>aero/function/ground-effect-factor-drag</property>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>gear/gear-pos-norm</property>
          <table>
           <independentVar lookup="row">aero/alpha-deg</independentVar>
            <tableData>
                0 0.025
               90 0
              179 0.025
            </tableData>
          </table>
      </product>
  </function>
  <function name="aero/coefficient/CDflaps">
      <description>Drag due to flaps</description>
      <product>
          <!--<property>aero/function/mach-effect-factor-drag</property>-->
          <property>aero/function/ground-effect-factor-drag</property>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>fcs/flap-pos-norm</property>
          <table>
           <independentVar lookup="row">aero/alpha-deg</independentVar>
            <tableData>
                0 0.01
               90 0
              179 0.01
            </tableData>
          </table>  
      </product>
  </function>

  <function name="aero/coefficient/Afactors">
    <description>Change in axial due to mach and ground effect</description>
    <product>
        <property>aero/function/ground-effect-factor-drag</property>
        <!--<property>aero/function/mach-effect-factor-drag</property> commented out, since the plane already fits flight envelope without it-->
        <cos>
          <property>aero/alpha-rad</property>
        </cos>
    </product>
  </function>
  
<!-- ********************************************************************** -->


  <axis name="NORMAL">

      <function name="aero/coefficient/CDnormal">
          <description>Drag due to flaps and gear</description>
          <product>
              <sum>
                <property>aero/coefficient/CDgear</property>
                <property>aero/coefficient/CDflaps</property>
              </sum>
              <sin>
                <property>aero/alpha-rad</property>
              </sin>
          </product>
      </function>

     <!-- from graphs page 43 and 46 -->
     <function name="aero/coefficient/CN">
        <description>
           Normal force due to alpha
           Increase in CN decreases Period and damping,Dutch Roll damping
           CN is low for landing
        </description>
        <product>
           <property>aero/function/ground-effect-factor-normal</property>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <sum>
             <table>
                <independentVar lookup="row">aero/alpha-deg</independentVar>
                <independentVar lookup="column">fcs/flap-pos-norm</independentVar>
                <tableData>
                             0    1          
                       0     0    0.05   
                      25     0    0.05       
                      40     0   -0.15      
                      50     0    0         
                </tableData>
             </table>
             <table>
                <independentVar lookup="row">aero/alpha-deg</independentVar>
                <independentVar lookup="column">fcs/elevator-pos-deg</independentVar>
                <tableData><!-- [measured using graph analyser] -->
                               -20      0     20
                       -20  -1.232 -1.178 -1.036
                         0  -0.300 -0.000  0.184
                        10   0.166  0.589  0.794
                        20   1.255  1.433  0.773
                        26   1.192  1.682  1.817
                        30.3 1.466  1.893  2.008
                        35.6 1.733  2.025  2.206
                        38.6 1.795  2.063  2.222
                        40.5 1.827  2.063  2.205
                        45.3 1.864  1.951  2.066
                        49.8 1.798  1.604  1.715
                        51.1 1.590  1.694  1.781
                        55.2 1.589  1.700  1.784
                        60.2 1.620  1.731  1.787
                        66.9 1.658  1.769  1.793
                        72.6 1.692  1.797  1.797
                        76.9 1.702  1.796  1.796
                </tableData>
             </table>
            </sum>           
        </product>
     </function>
  </axis>




<!-- ********************************************************************** -->


  <axis name="AXIAL">
        <function name="aero/coefficient/CDaxial">
          <description>Drag due to flaps and gear</description>
          <product>
              <sum>
                <property>aero/coefficient/CDgear</property>
                <property>aero/coefficient/CDflaps</property>
              </sum>
              <cos>
                <property>aero/alpha-rad</property>
              </cos>
          </product>
      </function>
     <!-- from graph page 43 [measured using graph analyser] -->
     <function name="aero/coefficient/CT">
        <description>
           Basic Tangential/axial Coefficient
        </description>
        <product>
           <property>aero/coefficient/Afactors</property>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <table>
              <independentVar lookup="row">aero/alpha-deg</independentVar>
              <tableData>
                -3.233  0.029
                -1.541  0.035
                 0.151  0.039
                 1.842  0.042
                 3.531  0.042
                 5.217  0.037
                 6.900  0.027
                 8.581  0.013
                10.000  0.000
                11.943 -0.013
                13.626 -0.022
                15.312 -0.028
                16.999 -0.032
                18.687 -0.033
                20.375 -0.035
                22.064 -0.035
              </tableData>
           </table>
        </product>
     </function>
  </axis>




<!-- ********************************************************************** -->


  <axis name="SIDE">

    <!-- from Component force graph page 105 -->
    <function name="aero/coefficient/Ccb">
      <description>
         Side Force coefficient due to Sideslip
          Contributes to damping of Dutch Roll mode
      </description>
      <product>
         <property>aero/qbar-psf</property>
         <property>metrics/Sw-sqft</property>
         <property>aero/beta-rad</property>
         <value>-1</value>
         <table>
            <independentVar lookup="row">aero/alpha-deg</independentVar>
            <tableData>
                 -80   0.63
                 -70   0.65
                 -50   1.12
                 -45   1.14
                 -35   1.12
                 -25   0.9
                 -22.5 0.875
                  10   0.875
                  17.5 0.85
                  22.5 0.61
                  40   0.78
                  44   0.78
                  55   0.6
                  70   0.55
                  95   0.13
                 120   0.06
                 135   0
            </tableData>
         </table>
      </product>
    </function>
  </axis>




<!-- ********************************************************************** -->


     <axis name="ROLL">

         <!-- from graph page 121, might just be wing contribution, weird that it has higher magnitude -->
         <!--<function name="aero/moment/Roll_beta">
            <description>
               Roll resistance due to beta
            </description>
            <product>
               <property>aero/qbar-psf</property>
               <property>metrics/Sw-sqft</property>
               <property>metrics/bw-ft</property>
               <property>aero/beta-rad</property>
               <table>
                  <independentVar lookup="row">aero/alpha-deg</independentVar>
                  <tableData>
                      -10  0
                       30 -0.38
                       40 -0.125
                       50 -0.225
                  </tableData>
               </table>
            </product>
         </function>-->
         <!-- from graph page 127, 126 and 122, conflict with 124 and itself-->
         <function name="aero/coefficient/Clb">
            <description>
               Roll damp due to beta
            </description>
                <product>
                 <property>aero/qbar-psf</property>
                 <property>metrics/Sw-sqft</property>
                 <property>metrics/bw-ft</property>
                 <property>aero/beta-rad</property>
                 <value>1</value><!-- fudge -->
                 <table>
                    <independentVar lookup="row">aero/alpha-deg</independentVar>
                    <independentVar lookup="column">aero/h_b-mac-ft</independentVar>
                    <tableData>
                               0      1.1
                                      <!-- from graph page 127 -->
                        -20    0.1    0.14
                        -10    0      0.9
                          0   -0.09  -0.05
                         10   -0.2   -0.2
                                     <!-- from graph page 126 -->
                         20   -0.35  -0.3
                         23   -0.4   -0.31
                         25   -0.38  -0.3
                                     <!-- from graph page 127 -->
                         40   -0.02  -0.02
                         50   -0.12  -0.12
                         60   -0.15  -0.15
                    </tableData>
                 </table>
              </product>
         </function>
      <!-- from graph page 134 -->
      <function name="aero/coefficient/Clp">
        <description>
          Roll damp due to roll rate
        </description>
        <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>velocities/p-rad_sec</property>
           <value>5</value><!-- fudge 5 -->
           <table>
             <independentVar lookup="row">aero/alpha-deg</independentVar>
             <tableData>
                -40  -0.15
                 -5  -0.275
                  0  -0.25
                  5  -0.275
                 50  -0.1
                 60  -0.2
                 70  -0.23
            </tableData>
          </table>
       </product>
    </function>
    <!-- from graph page 137 -->
    <function name="aero/coefficient/Clr">
       <description>
         Roll due to yaw rate
       </description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>velocities/r-aero-rad_sec</property>
           <value>0</value><!-- fudge -->
           <table>
             <independentVar lookup="row">aero/alpha-deg</independentVar>
             <tableData>
                -50   -0.4
                -47.5 -0.45
                  0    0.05
                 20    0.25
                 45    0.75
                 60    0.15
                 80    0
            </tableData>
          </table>
       </product>
    </function>
    <!-- from graph page 137 -->
    <function name="aero/coefficient/Clbdot">
       <description>
        Roll due to beta dot rate
      </description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>aero/betadot-rad_sec</property>
           <value>0</value><!-- fudge -->
           <table>
             <independentVar lookup="row">aero/alpha-deg</independentVar>
             <tableData>
                3    0
               15   -0.05
               20   -0.1
               27.5 -0.2
               40   -0.3
               55    0
            </tableData>
          </table>
          
       </product>
    </function>
<!-- from graph page 131 -->
    <function name="aero/coefficient/Claileron">
       <description>
        Roll due to aileron
      </description>
       <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>metrics/bw-ft</property>
          <property>fcs/left-aileron-pos-rad</property>
          <value>1</value><!-- fudge -->
          <table>
             <independentVar lookup="row">aero/alpha-deg</independentVar>
             <independentVar lookup="column">fcs/elevator-pos-deg</independentVar>
             <tableData>
                       -25      0       20
                -50      0.01   0.1      0.1
                -40      0.03   0.12     0.11
                -30      0.07   0.17     0.13
                -20      0.07   0.2      0.135
                -10      0.07   0.22     0.14
                  0      0.07   0.215    0.13
                 10      0.07   0.21     0.11
                 20      0.1    0.2      0.1
                 30      0.12   0.18     0.07
                 40      0.12   0.13     0.055
                 50      0.12   0.065    0.035
                 60      0.12   0.05     0.025
                 70      0.12   0.045    0.02
                 90      0.12   0.03     0.02
            </tableData>
          </table>
       </product>
    </function>
     </axis>




<!-- ********************************************************************** -->

      <!-- from graph page 43 and page 61, 62. Not page 64 -->
     <axis name="PITCH">
          <function name="aero/coefficient/Cm">
            <description>
               Pitch moment due to alpha
            </description>
            <product>
               <property>aero/qbar-psf</property>
               <property>metrics/Sw-sqft</property>
               <property>metrics/cbarw-ft</property>
               <sum>
                <property>aero/function/ground-effect-factor-Cm</property>
                <table>
                  <independentVar lookup="row">aero/alpha-deg</independentVar>
                  <tableData>
                        <!-- Extrapolated as per page 61 -->
                      -10.0           0.03 
                        <!-- graph page 43 -->
                        0.0           0.02
                        2.5           0
                       10.0          -0.03
                       20.0          -0.07
                       25.0          -0.09
                       <!-- graph page 62 --> 
                       26.0          -0.093
                       28.0          -0.085
                       34.0          -0.05
                       37.0          -0.045
                       42.0          -0.05
                       47.0          -0.125
                       51.0          -0.125
                       70.0          -0.18
                  </tableData>
               </table>
             </sum>
            </product>
         </function>
<!-- from lower left graph page 79 -->
    <function name="aero/coefficient/Cmelevator">
       <description>Pitch moment due to elevator</description>
       <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>metrics/cbarw-ft</property>
          <table>
            <independentVar lookup="row">aero/alpha-deg</independentVar>
            <independentVar lookup="column">fcs/elevator-pos-deg</independentVar>
            <tableData>
                       -25      -20         -10           0            10           20
                -10     0.21    0.19       0.14      0.0425    -0.045     -0.115
                   0     0.2      0.175     0.1        0.0          -0.0875   -0.17
                 10     0.165  0.145     0.065   -0.025      -0.12       -0.195
                 20     0.145  0.125     0.0425 -0.055      -0.14       -0.2
                 30     0.13    0.1         0.02     -0.065      -0.115     -0.16
            </tableData>
         </table>         
       </product>
    </function>
    <!-- from graph page 83 -->
    <function name="aero/moment/Cmq">
       <description>Pitch damping due to pitch rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/cbarw-ft</property>
           <property>aero/ci2vel</property>
           <property>velocities/q-aero-rad_sec</property>
           <value>1</value><!-- fudge -->
           <table>
              <independentVar>aero/alpha-deg</independentVar>
              <tableData>
                  -60   -1
                  -45   -0.5
                  -20   -1.25 <!-- -18 -->
                    7.5 -1.25
                   15   -1
                   27.5 -1.4
                   47.5 -0.3
                   60   -0.8
                   90   -0.9
              </tableData>
          </table>
       </product>
    </function>
    <!-- from graph page 83 -->
    <function name="aero/coefficient/Cmadot">
       <description>Pitch damping due to alpha dot rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/cbarw-ft</property>
           <property>aero/ci2vel</property>
           <property>aero/alphadot-deg_sec</property><!-- document does not specify unit, but degree works, rad makes it wooble a bit after pitching -->
           <value>1</value><!-- fudge -->
           <table>
              <independentVar>aero/alpha-deg</independentVar>
              <tableData>
                  -40  0
                  -20 -0.45     <!-- -9 -->
                   20 -0.45
                   40  0
              </tableData>
          </table>
       </product>
    </function>

     </axis>




<!-- ********************************************************************** -->


     <axis name="YAW">

        <!-- from graph page 134 and 137 -->
         <function name="aero/coefficient/Cnp">
            <description>
               Yawing due to roll speed
            </description>
            <product>
               <property>aero/qbar-psf</property>
               <property>metrics/Sw-sqft</property>
               <property>metrics/bw-ft</property>
               <property>aero/bi2vel</property>
               <property>velocities/p-rad_sec</property>
               <table>
                  <independentVar lookup="row">aero/alpha-deg</independentVar>
                  <tableData>
                      -60 0.03
                      -50 0
                      -45 0.025
                      -35 0.2
                      -30 0.175
                       0 0
                      30 -0.175
                      35 -0.2
                      45 -0.025
                      50 0
                      60 -0.03
                  </tableData>
               </table>
               
            </product>
         </function>

                 
      <!-- from graph page 116 -->
      <function name="aero/coefficient/Cnr">
       <description>Yaw due to yaw rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>velocities/r-aero-rad_sec</property>
           <table>
             <independentVar lookup="row">aero/alpha-deg</independentVar>
             <tableData>
                -60 -0.11
                -15 -0.37
                 15 -0.37
                 25 -0.3
                 35 -0.28
                 50 -0.17
                 80 -0.065
                100 -0.05
            </tableData>
          </table>
          
       </product>
    </function>
    <!-- from graph page 116-->
      <function name="aero/coefficient/Cnbdot">
       <description>Yaw due to beta dot rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>aero/betadot-rad_sec</property>
           <value>-1</value>
           <table>
              <independentVar lookup="row">aero/alpha-deg</independentVar>
             <tableData>
                -50 0
                -30 0.02
                -20 0.015
                 20 0.03
                 60 0.0
            </tableData>
          </table>
          
       </product>
    </function>
    <!-- from graph page 109-->
      <function name="aero/coefficient/Cnb">
       <description>Yaw due to beta</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/beta-rad</property>
           <table>
              <independentVar lookup="row">aero/alpha-deg</independentVar>
              <independentVar lookup="column">fcs/flap-pos-norm</independentVar>
             <tableData>
                      0          1
                -100  0.14       0.14
                 -80  0.135      0.135
                 -60  0.13       0.13
                 -50  0.12       0.07
                 -30  0.07       0.02
                 -20  0.08       0.03
                   6  0.08       0.07
                  20  0.025      0.02
                  28  0          0
                  33 -0.05      -0.06
                  35 -0.14      -0.18
                  60 -0.175     -0.175
                  70 -0.08      -0.08
                  80 -0.09      -0.09
                 110 -0.05      -0.05
            </tableData>
          </table>
       </product>
    </function>
    <!-- from graph page 133 -->
    <function name="aero/coefficient/Cnaileron">
       <description>yaw due to aileron</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>fcs/left-aileron-pos-rad</property>
           <table>
             <independentVar lookup="row">aero/alpha-deg</independentVar>
             <independentVar lookup="column">fcs/elevator-pos-deg</independentVar>
             <tableData>
                       -25        0        20
                -50      0.045    0.055     0.01
                -20      0.04     0.055     0.008
                  0      0.05     0.055     0.005
                 10      0.055    0.0525    0.0
                 20      0.07     0.045    -0.01
                 30      0.08     0.03     -0.03
                 40      0.05     0.01     -0.025
                 70      0.045   -0.025    -0.02
                 80      0.03    -0.03     -0.02
            </tableData>
          </table>
          
       </product>
    </function>
    <!-- from graph page 115 -->
    <function name="aero/coefficient/Cnrudder">
       <description>Yaw moment due to rudder</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>fcs/rudder-pos-rad</property>
           <table>
              <independentVar lookup="row">aero/alpha-deg</independentVar>
              <independentVar lookup="column">aero/beta-deg</independentVar>
             <tableData>
        -50      -30      -20        0     20       30       50
  -80      0      -0.005   -0.01   -0.025  -0.01    -0.005    0
  -70      0      -0.005   -0.015  -0.03   -0.015   -0.005    0
  -60     -0.002  -0.01    -0.02   -0.035  -0.02    -0.01    -0.002
  -50     -0.004  -0.0125  -0.0233 -0.04   -0.0233  -0.0125  -0.004
  -40     -0.006  -0.015   -0.025  -0.055  -0.025   -0.015   -0.006
  -20     -0.01   -0.025   -0.04   -0.075  -0.04    -0.025   -0.01
    0     -0.013  -0.033   -0.055  -0.09   -0.055   -0.033   -0.013
   10     -0.012  -0.035   -0.055  -0.09   -0.055   -0.035   -0.012
   20     -0.01   -0.03    -0.05   -0.085  -0.05    -0.03    -0.01
   30     -0.008  -0.02    -0.035  -0.075  -0.035   -0.02    -0.008
   40     -0.005  -0.01    -0.02   -0.045  -0.02    -0.01    -0.005
   50      0      -0.005   -0.005  -0.015  -0.005   -0.005    0
   60      0       0        0       0       0        0        0
            </tableData>
          </table>
       </product>
    </function>        
  </axis>
</aerodynamics>